<div class="wish-form">
    <form action="/" method="POST" id="add-burger">
        <label for="burger">Add a Burger to the Menu</label>
        <input name="burger"></textarea>
        <input id="submit-btn" type="submit" value="Add Burger">
    </form>
</div>
<div class="container">
    <div class="row">
        <div class="col">
            <ul>
                {{#each burgers}}
                    {{#unless eaten}}
                    <li>
                        {{burgerName}} 
                        <button data-id="{{id}}" class="devour">Devour It</button>
                    </li>
                    {{/unless}}
                {{/each}}
            </ul>
        </div>
        <div class="col">
            <ul>
                {{#each burgers}}
                    {{#if eaten}}
                    <li>
                        {{burgerName}} 
                    </li>
                    {{/if}}
                {{/each}}
            </ul>
        </div>
    </div>
</div>
<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
{{!-- <script type="text/javascript" src="public/assets/js/main.js"></script> --}}
<script>
    $(document).ready(function(){
        console.log('testing??');
        $('#add-burger').on('submit', function(event){
            event.preventDefault();
            console.log($(this));
            let burger = $("#add-burger [name='burger']").val();
            let eaten = false;
            $.ajax({
                url: '/',
                data: {
                    burger,
                    eaten: false
                },
                type: 'POST'
            }).done(function(response){
                console.log(response);
                location.reload();
            });
        });
        $(document).on('click','.devour',function(){
            console.log('devour it');
            let burgerId = $(this).get(0).dataset.id;
            console.log(burgerId);
            $.ajax({
                url: '/',
                type: 'PUT',
                data: {id: burgerId, update: {eaten: true}}
            }).done(function(response){
                console.log(response);
                location.reload();
            });
        });
    });
</script>